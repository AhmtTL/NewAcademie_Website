import{l as _,m as M,Q as T,c as a,o as l,a as C,u,g as F,w as n,b as e,t as o,i as w,v as k,j as z,F as V,r as A,h as i,n as L,e as c,S as x,d as g}from"./app-CujCkvLJ.js";import{_ as G}from"./AdminLayout-Cw2MKWdw.js";import"./BaseLayout-Czs18eZX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"py-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8"},E={class:"bg-white overflow-hidden shadow rounded-lg"},Q={class:"p-5"},H={class:"flex items-center"},$={class:"ml-5 w-0 flex-1"},q={class:"text-lg font-medium text-gray-900"},J={class:"bg-white overflow-hidden shadow rounded-lg"},K={class:"p-5"},W={class:"flex items-center"},X={class:"ml-5 w-0 flex-1"},Y={class:"text-lg font-medium text-gray-900"},Z={class:"bg-white overflow-hidden shadow rounded-lg"},ee={class:"p-5"},te={class:"flex items-center"},se={class:"ml-5 w-0 flex-1"},oe={class:"text-lg font-medium text-gray-900"},re={class:"bg-white overflow-hidden shadow rounded-lg"},le={class:"p-5"},de={class:"flex items-center"},ae={class:"ml-5 w-0 flex-1"},ie={class:"text-lg font-medium text-gray-900"},ne={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ue={class:"p-6 border-b border-gray-200"},ce={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},xe={class:"relative"},ge={class:"overflow-x-auto"},me={class:"min-w-full divide-y divide-gray-200"},fe={class:"bg-white divide-y divide-gray-200"},he={class:"px-6 py-4 whitespace-nowrap"},pe={class:"flex items-center"},ve={class:"flex-shrink-0 h-8 w-8"},ye={class:"h-8 w-8 rounded-full bg-gray-400 flex items-center justify-center"},_e={class:"text-xs font-medium text-white"},we={class:"ml-3"},be={class:"text-sm font-medium text-gray-900"},ke={class:"text-sm text-gray-500"},Se={key:0,class:"text-xs text-blue-600"},je={key:1,class:"text-xs text-gray-500"},Pe={key:2,class:"text-xs text-gray-500"},Ce={key:3,class:"text-xs text-gray-400"},Ve={class:"px-6 py-4 whitespace-nowrap"},De={class:"text-sm font-medium text-gray-900"},Ue={class:"text-sm text-gray-500"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ne={class:"px-6 py-4 whitespace-nowrap"},Me={key:0,class:"text-xs text-orange-600 mt-1"},Te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Fe={key:0,class:"text-xs text-green-600"},ze={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ae={key:1,class:"text-gray-400"},Le={class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Ge={class:"flex-1 flex justify-between sm:hidden"},Ie={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Oe={class:"text-sm text-gray-700"},Re={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},qe={__name:"Index",props:{payments:Object,filters:Object,stats:Object},setup(r){const m=r,b=_(m.filters.search||""),f=_(m.filters.status||""),h=_(m.filters.date_from||""),p=_(m.filters.date_to||"");M([b,f,h,p],([d,t,s,y])=>{T.get(route("admin.payments.index"),{search:d,status:t,date_from:s,date_to:y},{preserveState:!0,replace:!0})});const v=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d),D=d=>new Date(d).toLocaleDateString(),U=d=>new Date(d).toLocaleString(),B=d=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",processing:"bg-blue-100 text-blue-800",refunded:"bg-gray-100 text-gray-800"})[d]||"bg-gray-100 text-gray-800",N=()=>{const d=new URLSearchParams({status:f.value,date_from:h.value,date_to:p.value});window.location.href=route("admin.payments.export")+"?"+d.toString()};return(d,t)=>(l(),a(V,null,[C(u(F),{title:"Payments"}),C(G,null,{header:n(()=>[e("div",{class:"flex justify-between items-center"},[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Payments ",-1)),e("button",{onClick:N,class:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md"}," Export CSV ")])]),default:n(()=>[e("div",I,[e("div",O,[e("div",R,[e("div",E,[e("div",Q,[e("div",H,[t[6]||(t[6]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",$,[e("dl",null,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Revenue",-1)),e("dd",q,o(v(r.stats.total_revenue)),1)])])])])]),e("div",J,[e("div",K,[e("div",W,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",X,[e("dl",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending Amount",-1)),e("dd",Y,o(v(r.stats.pending_amount)),1)])])])])]),e("div",Z,[e("div",ee,[e("div",te,[t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",se,[e("dl",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Failed Payments",-1)),e("dd",oe,o(r.stats.failed_count),1)])])])])]),e("div",re,[e("div",le,[e("div",de,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",ae,[e("dl",null,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Transactions",-1)),e("dd",ie,o(r.stats.total_transactions),1)])])])])])]),e("div",ne,[e("div",ue,[e("div",ce,[e("div",null,[t[14]||(t[14]=e("label",{for:"search",class:"sr-only"},"Search payments",-1)),e("div",xe,[t[13]||(t[13]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),w(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),type:"text",placeholder:"Search by user or program...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,b.value]])])]),e("div",null,[w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},t[15]||(t[15]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"processing"},"Processing",-1),e("option",{value:"failed"},"Failed",-1),e("option",{value:"refunded"},"Refunded",-1)]),512),[[z,f.value]])]),e("div",null,[w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>h.value=s),type:"date",placeholder:"From date",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,h.value]])]),e("div",null,[w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),type:"date",placeholder:"To date",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"},null,512),[[k,p.value]])])])]),e("div",ge,[e("table",me,[t[17]||(t[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Program "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",fe,[(l(!0),a(V,null,A(r.payments.data,s=>{var y,S,j,P;return l(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",he,[e("div",pe,[e("div",ve,[e("div",ye,[e("span",_e,o((((y=s.user)==null?void 0:y.name)||s.guest_name||"Guest User").charAt(0)),1)])]),e("div",we,[e("div",be,o(((S=s.user)==null?void 0:S.name)||s.guest_name||"Guest User"),1),e("div",ke,o(((j=s.user)==null?void 0:j.email)||s.guest_email||"No email"),1),s.guest_school_name?(l(),a("div",Se," School: "+o(s.guest_school_name),1)):i("",!0),s.guest_grade?(l(),a("div",je," Grade: "+o(s.guest_grade),1)):i("",!0),s.guest_city?(l(),a("div",Pe," City: "+o(s.guest_city),1)):i("",!0),!s.user&&s.guest_phone?(l(),a("div",Ce,o(s.guest_phone),1)):i("",!0)])])]),e("td",Ve,[e("div",De,o(((P=s.program)==null?void 0:P.title)||"Unknown Program"),1),e("div",Ue,o(s.program?v(s.program.price):"N/A"),1)]),e("td",Be,o(v(s.amount)),1),e("td",Ne,[e("span",{class:L(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",B(s.status)])},o(s.status),3),s.manual_override?(l(),a("div",Me,"Manual")):i("",!0)]),e("td",Te,[e("div",null,o(U(s.created_at)),1),s.paid_at?(l(),a("div",Fe," Paid: "+o(D(s.paid_at)),1)):i("",!0)]),e("td",ze,[s.id?(l(),c(u(x),{key:0,href:d.route("admin.payments.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:n(()=>t[16]||(t[16]=[g(" View Details ")])),_:2,__:[16]},1032,["href"])):(l(),a("span",Ae,"No ID"))])])}),128))])])]),e("div",Le,[e("div",Ge,[r.payments.prev_page_url?(l(),c(u(x),{key:0,href:r.payments.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:n(()=>t[18]||(t[18]=[g(" Previous ")])),_:1,__:[18]},8,["href"])):i("",!0),r.payments.next_page_url?(l(),c(u(x),{key:1,href:r.payments.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:n(()=>t[19]||(t[19]=[g(" Next ")])),_:1,__:[19]},8,["href"])):i("",!0)]),e("div",Ie,[e("div",null,[e("p",Oe," Showing "+o(r.payments.from)+" to "+o(r.payments.to)+" of "+o(r.payments.total)+" results ",1)]),e("div",null,[e("nav",Re,[r.payments.prev_page_url?(l(),c(u(x),{key:0,href:r.payments.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:n(()=>t[20]||(t[20]=[g(" Previous ")])),_:1,__:[20]},8,["href"])):i("",!0),r.payments.next_page_url?(l(),c(u(x),{key:1,href:r.payments.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:n(()=>t[21]||(t[21]=[g(" Next ")])),_:1,__:[21]},8,["href"])):i("",!0)])])])])])])])]),_:1})],64))}};export{qe as default};
