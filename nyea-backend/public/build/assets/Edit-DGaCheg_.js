import{x as A,l as V,s as E,B as O,c as d,o as u,a as l,u as t,g as W,w,b as e,t as c,S as C,d as v,f as $,i as p,F as S,r as L,j as P,h,v as q,n as B,p as F,k as N}from"./app-CujCkvLJ.js";import{_ as H}from"./AdminLayout-Cw2MKWdw.js";import{_ as i,b as n,a as m}from"./TextInput-BgL-P8ez.js";import{P as R}from"./PrimaryButton-B-OuZ4ev.js";import"./BaseLayout-Czs18eZX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},X={class:"p-6 bg-white border-b border-gray-200"},J={class:"flex items-center justify-between mb-6"},Q={class:"text-gray-600 mt-1"},Y={class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},Z=["value"],ee={class:"bg-amber-50 border border-amber-200 rounded-lg p-6"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},oe={class:"mt-1 text-xs text-gray-600"},te={key:0},le={key:1},ae={class:"bg-green-50 border border-green-200 rounded-lg p-6"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={class:"md:col-span-2"},ne={class:"md:col-span-2"},de={class:"md:col-span-2"},ue={class:"mt-2 space-y-3"},me={key:0,class:"flex items-center space-x-4"},ge={class:"flex-shrink-0"},pe=["src"],ce={class:"flex items-center space-x-4"},ve={key:0},be={key:1},fe=["disabled"],ye={class:"mt-6"},_e={class:"mt-2 space-y-2"},xe={class:"flex gap-2"},he={key:0,class:"flex flex-wrap gap-2"},ke=["onClick"],we={class:"bg-orange-50 border border-orange-200 rounded-lg p-6"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se={class:"bg-purple-50 border border-purple-200 rounded-lg p-6"},Ue={class:"space-y-4"},ze={class:"flex items-center space-x-6"},Ce={class:"flex items-center"},Le={class:"flex items-center"},Pe={class:"flex items-center justify-end space-x-4"},qe={key:0},Ee={__name:"Edit",props:{session:Object,workshops:Array},setup(k){const r=k,o=A({program_id:r.session.program_id,program_type:r.session.program_type||"essentials",location:r.session.location,city:r.session.city||"",country:r.session.country||"",country_code:r.session.country_code||"",venue_name:r.session.venue_name||"",organization_logo:r.session.organization_logo||"",venue_address:r.session.venue_address||"",location_highlights:r.session.location_highlights||[],date:r.session.date?new Date(r.session.date).toISOString().split("T")[0]:"",time:r.session.time,timezone:r.session.timezone||"",available_spots:r.session.available_spots,booked_spots:r.session.booked_spots,price_override:r.session.price_override||"",is_active:r.session.is_active,is_featured:r.session.is_featured,special_notes:r.session.special_notes||"",metadata:r.session.metadata||{}}),b=V(""),f=V(!1),y=V(r.session.organization_logo||""),U=()=>{b.value.trim()&&(o.location_highlights.push(b.value.trim()),b.value="")},T=g=>{o.location_highlights.splice(g,1)},j=async g=>{const s=g.target.files[0];if(!s)return;f.value=!0;const _=new FormData;_.append("image",s),_.append("type","organization");try{const a=await(await fetch("/admin/images/upload",{method:"POST",body:_,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).json();a.success?(o.organization_logo=a.data.url,y.value=a.data.url):alert("Logo upload failed: "+a.message)}catch(x){alert("Logo upload failed: "+x.message)}finally{f.value=!1}},D=()=>{o.organization_logo="",y.value=""},M=()=>{o.put(route("admin.workshop-sessions.update",r.session.id))};return E(()=>r.workshops.find(g=>g.id===parseInt(o.program_id))),(g,s)=>{const _=O('else"');return u(),d(S,null,[l(t(W),{title:"Edit Workshop Session"}),l(H,null,{default:w(()=>{var x;return[e("div",G,[e("div",I,[e("div",K,[e("div",X,[e("div",J,[e("div",null,[s[18]||(s[18]=e("h2",{class:"text-2xl font-bold text-gray-900"},"Edit Workshop Session",-1)),e("p",Q,c(k.session.location)+" - "+c((x=k.session.program)==null?void 0:x.title),1)]),l(t(C),{href:g.route("admin.workshop-sessions.index"),class:"text-gray-600 hover:text-gray-900 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded transition-colors"},{default:w(()=>s[19]||(s[19]=[v(" â† Back to Sessions ")])),_:1,__:[19]},8,["href"])]),e("form",{onSubmit:$(M,["prevent"]),class:"space-y-8"},[e("div",Y,[s[21]||(s[21]=e("h3",{class:"text-lg font-semibold text-blue-900 mb-4"},"ðŸŽ¯ Workshop Selection",-1)),e("div",null,[l(i,{for:"program_id",value:"Workshop Program"}),p(e("select",{id:"program_id","onUpdate:modelValue":s[0]||(s[0]=a=>t(o).program_id=a),class:"mt-1 block w-full border-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-md shadow-sm",required:""},[s[20]||(s[20]=e("option",{value:""},"Choose a workshop...",-1)),(u(!0),d(S,null,L(k.workshops,a=>(u(),d("option",{key:a.id,value:a.id},c(a.title)+" (Base: $"+c(a.base_price)+") ",9,Z))),128))],512),[[P,t(o).program_id]]),l(n,{class:"mt-2",message:t(o).errors.program_id},null,8,["message"])])]),e("div",ee,[s[23]||(s[23]=e("h3",{class:"text-lg font-semibold text-amber-900 mb-4"},"ðŸ‘‘ Program Type",-1)),e("div",se,[e("div",null,[l(i,{for:"program_type",value:"Program Type *"}),p(e("select",{id:"program_type","onUpdate:modelValue":s[1]||(s[1]=a=>t(o).program_type=a),class:"mt-1 block w-full border-gray-300 focus:border-amber-500 focus:ring-amber-500 rounded-md shadow-sm",required:""},s[22]||(s[22]=[e("option",{value:"essentials"},"âš¡ Essentials Program",-1),e("option",{value:"mastery"},"ðŸ‘‘ Mastery Program",-1)]),512),[[P,t(o).program_type]]),l(n,{class:"mt-2",message:t(o).errors.program_type},null,8,["message"]),e("div",oe,[t(o).program_type==="essentials"?(u(),d("span",te,"Standard program with core content")):h("",!0),t(o).program_type==="mastery"?(u(),d("span",le,"Premium program with extended content and coaching - Set direct price below")):h("",!0)])])])]),e("div",ae,[s[26]||(s[26]=e("h3",{class:"text-lg font-semibold text-green-900 mb-4"},"ðŸ“ Location Details",-1)),e("div",re,[e("div",null,[l(i,{for:"location",value:"Location Name *"}),l(m,{id:"location",modelValue:t(o).location,"onUpdate:modelValue":s[2]||(s[2]=a=>t(o).location=a),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.location},null,8,["message"])]),e("div",null,[l(i,{for:"city",value:"City"}),l(m,{id:"city",modelValue:t(o).city,"onUpdate:modelValue":s[3]||(s[3]=a=>t(o).city=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.city},null,8,["message"])]),e("div",null,[l(i,{for:"country",value:"Country"}),l(m,{id:"country",modelValue:t(o).country,"onUpdate:modelValue":s[4]||(s[4]=a=>t(o).country=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.country},null,8,["message"])]),e("div",null,[l(i,{for:"country_code",value:"Country Code"}),l(m,{id:"country_code",modelValue:t(o).country_code,"onUpdate:modelValue":s[5]||(s[5]=a=>t(o).country_code=a),type:"text",class:"mt-1 block w-full",maxlength:"3"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.country_code},null,8,["message"])]),e("div",ie,[l(i,{for:"venue_name",value:"Venue Name"}),l(m,{id:"venue_name",modelValue:t(o).venue_name,"onUpdate:modelValue":s[6]||(s[6]=a=>t(o).venue_name=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.venue_name},null,8,["message"])]),e("div",ne,[l(i,{for:"venue_address",value:"Venue Address"}),p(e("textarea",{id:"venue_address","onUpdate:modelValue":s[7]||(s[7]=a=>t(o).venue_address=a),class:"mt-1 block w-full border-gray-300 focus:border-green-500 focus:ring-green-500 rounded-md shadow-sm",rows:"2"},null,512),[[q,t(o).venue_address]]),l(n,{class:"mt-2",message:t(o).errors.venue_address},null,8,["message"])]),e("div",de,[l(i,{for:"organization_logo",value:"Organization Logo"}),e("div",ue,[y.value?(u(),d("div",me,[e("div",ge,[e("img",{src:y.value,alt:"Organization Logo",class:"h-16 w-16 object-contain border border-gray-300 rounded-lg bg-white p-2"},null,8,pe)]),e("div",{class:"flex-1"},[s[24]||(s[24]=e("p",{class:"text-sm text-gray-600"},"Current organization logo",-1)),e("button",{type:"button",onClick:D,class:"mt-1 text-red-600 hover:text-red-800 text-sm"}," Remove Logo ")])])):h("",!0),e("div",ce,[e("label",{for:"logo_upload",class:B(["cursor-pointer bg-white border border-gray-300 rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",{"opacity-50":f.value}])},[f.value?(u(),d("span",ve,"ðŸ”„ Uploading...")):(u(),d("span",be,"ðŸ“ "+c(y.value?"Change Logo":"Upload Logo"),1))],2),e("input",{id:"logo_upload",type:"file",accept:"image/jpeg,image/png,image/jpg,image/gif,image/webp,image/svg+xml",onChange:j,class:"hidden",disabled:f.value},null,40,fe),s[25]||(s[25]=e("div",{class:"text-xs text-gray-500"},[v(" Max 2MB â€¢ JPEG, PNG, SVG, WebP supported"),e("br"),v(" Images are automatically resized to 64x64px ")],-1))])]),l(n,{class:"mt-2",message:t(o).errors.organization_logo},null,8,["message"])])]),e("div",ye,[l(i,{value:"Location Highlights"}),e("div",_e,[e("div",xe,[l(m,{modelValue:b.value,"onUpdate:modelValue":s[8]||(s[8]=a=>b.value=a),type:"text",class:"flex-1",placeholder:"e.g., Arabic Language Support",onKeyup:F(U,["enter"])},null,8,["modelValue"]),e("button",{type:"button",onClick:U,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-colors"}," Add ")]),t(o).location_highlights.length>0?(u(),d("div",he,[(u(!0),d(S,null,L(t(o).location_highlights,(a,z)=>(u(),d("span",{key:z,class:"inline-flex items-center bg-green-100 text-green-800 text-sm px-3 py-1 rounded-full border border-green-200"},[v(" âœ¨ "+c(a)+" ",1),e("button",{type:"button",onClick:Be=>T(z),class:"ml-2 text-green-600 hover:text-green-800"}," Ã— ",8,ke)]))),128))])):h("",!0)])])]),e("div",we,[s[28]||(s[28]=e("h3",{class:"text-lg font-semibold text-orange-900 mb-4"},"ðŸ“… Schedule & Capacity",-1)),e("div",Ve,[e("div",null,[l(i,{for:"date",value:"Date *"}),l(m,{id:"date",modelValue:t(o).date,"onUpdate:modelValue":s[9]||(s[9]=a=>t(o).date=a),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.date},null,8,["message"])]),e("div",null,[l(i,{for:"time",value:"Time *"}),l(m,{id:"time",modelValue:t(o).time,"onUpdate:modelValue":s[10]||(s[10]=a=>t(o).time=a),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.time},null,8,["message"])]),e("div",null,[l(i,{for:"timezone",value:"Timezone"}),l(m,{id:"timezone",modelValue:t(o).timezone,"onUpdate:modelValue":s[11]||(s[11]=a=>t(o).timezone=a),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.timezone},null,8,["message"])]),e("div",null,[l(i,{for:"available_spots",value:"Available Spots *"}),l(m,{id:"available_spots",modelValue:t(o).available_spots,"onUpdate:modelValue":s[12]||(s[12]=a=>t(o).available_spots=a),type:"number",min:"1",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.available_spots},null,8,["message"])]),e("div",null,[l(i,{for:"booked_spots",value:"Booked Spots"}),l(m,{id:"booked_spots",modelValue:t(o).booked_spots,"onUpdate:modelValue":s[13]||(s[13]=a=>t(o).booked_spots=a),type:"number",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),l(n,{class:"mt-2",message:t(o).errors.booked_spots},null,8,["message"])]),e("div",null,[l(i,{for:"price_override",value:"Session Price Override"}),l(m,{id:"price_override",modelValue:t(o).price_override,"onUpdate:modelValue":s[14]||(s[14]=a=>t(o).price_override=a),type:"number",step:"0.01",min:"0",class:"mt-1 block w-full"},null,8,["modelValue"]),s[27]||(s[27]=e("div",{class:"mt-1 text-xs text-gray-600"}," Leave empty to use workshop base price ",-1)),l(n,{class:"mt-2",message:t(o).errors.price_override},null,8,["message"])])])]),e("div",Se,[s[31]||(s[31]=e("h3",{class:"text-lg font-semibold text-purple-900 mb-4"},"âš™ï¸ Additional Settings",-1)),e("div",Ue,[e("div",null,[l(i,{for:"special_notes",value:"Special Notes"}),p(e("textarea",{id:"special_notes","onUpdate:modelValue":s[15]||(s[15]=a=>t(o).special_notes=a),class:"mt-1 block w-full border-gray-300 focus:border-purple-500 focus:ring-purple-500 rounded-md shadow-sm",rows:"3"},null,512),[[q,t(o).special_notes]]),l(n,{class:"mt-2",message:t(o).errors.special_notes},null,8,["message"])]),e("div",ze,[e("label",Ce,[p(e("input",{"onUpdate:modelValue":s[16]||(s[16]=a=>t(o).is_active=a),type:"checkbox",class:"rounded border-gray-300 text-purple-600 shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50"},null,512),[[N,t(o).is_active]]),s[29]||(s[29]=e("span",{class:"ml-2 text-sm text-gray-700"},"Active Session",-1))]),e("label",Le,[p(e("input",{"onUpdate:modelValue":s[17]||(s[17]=a=>t(o).is_featured=a),type:"checkbox",class:"rounded border-gray-300 text-purple-600 shadow-sm focus:border-purple-300 focus:ring focus:ring-purple-200 focus:ring-opacity-50"},null,512),[[N,t(o).is_featured]]),s[30]||(s[30]=e("span",{class:"ml-2 text-sm text-gray-700"},"Featured Session",-1))])])])]),e("div",Pe,[l(t(C),{href:g.route("admin.workshop-sessions.index"),class:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-2 px-6 rounded transition-colors"},{default:w(()=>s[32]||(s[32]=[v(" Cancel ")])),_:1,__:[32]},8,["href"]),l(R,{class:B({"opacity-25":t(o).processing}),disabled:t(o).processing},{default:w(()=>[t(o).processing?(u(),d("span",qe,"Updating...")):h("",!0),p((u(),d("span",null,s[33]||(s[33]=[v("Update Session")]))),[[_]])]),_:1},8,["class","disabled"])])],32)])])])])]}),_:1})],64)}}};export{Ee as default};
